System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(o){"use strict";var i,s,u,t,e,n,r,a;return{setters:[function(o){i=o.createClass},function(o){s=o.cclegacy,u=o.Node,t=o.director,e=o.game,n=o.AudioSource,r=o.AudioClip},function(o){a=o.ResourceUtil}],execute:function(){s._RF.push({},"3d83d5S/ZVN7LDmkL4Flr1Z","audioManager",void 0),o("AudioManager",function(){function o(){this.musicVolume=.8,this.soundVolume=1,this.audios={},this.arrSound=[],this.dictWeaponSoundIndex={},this._persistRootNode=null,this._audioSources=[]}var s=o.prototype;return s.init=function(){this._persistRootNode||(this._persistRootNode=new u("audio"),t.getScene().addChild(this._persistRootNode),e.addPersistRootNode(this._persistRootNode),this.musicVolume=this.getAudioSetting(!0)?.8:0,this.soundVolume=this.getAudioSetting(!1)?1:0)},s._getAudioSource=function(o){for(var i,s=0;s<this._audioSources.length;++s){var u=this._audioSources[s];if(!u.playing){i=u;break}}return i||(i=this._persistRootNode.addComponent(n),this._audioSources.push(i)),i.node.off(n.EventType.ENDED),i.clip=o,i.currentTime=0,i},s.getAudioSetting=function(o){return!0},s.playMusic=function(o,i){var s=this,u="audio/music/"+o;a.loadRes(u,r).then((function(u){var t=s._getAudioSource(u),e={source:t,isMusic:!0};s.audios[o]=e,t.volume=s.musicVolume,t.loop=i,t.play()}))},s.playSound=function(o,i){var s=this;if(void 0===i&&(i=!1),this.soundVolume){a.loadRes("audio/sound/"+o,r).then((function(u){var t=s._getAudioSource(u),e={source:t,isMusic:!1};s.arrSound.push(e),i&&(s.audios[o]=e),t.volume=s.soundVolume,t.loop=i,t.play(),t.node.on(n.EventType.ENDED,(function(){for(var o=0;o<s.arrSound.length;o++)s.arrSound[o].source==t&&(s.arrSound.splice(o,1),o--)}))}))}},s.stop=function(o){this.audios.hasOwnProperty(o)&&this.audios[o].source.stop()},s.stopAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.stop()}},s.getMusicVolume=function(){return this.musicVolume},s.setMusic=function(o){for(var i in this.musicVolume=o,this.audios){if(this.audios.hasOwnProperty(i)&&this.audios[i].isMusic)this.audios[i].source.volume=this.musicVolume}},s.pauseAll=function(){for(var o in console.log("pause all music!!!"),this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.pause()}},s.resumeAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.play()}},s.setSound=function(o){for(var i in this.soundVolume=o,this.audios){if(this.audios.hasOwnProperty(i)&&!this.audios[i].isMusic)this.audios[i].source.volume=this.soundVolume}for(var s=0;s<this.arrSound.length;s++){this.arrSound[s].source.volume=this.soundVolume}},s.stopSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].source.stop()},i(o,null,[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=void 0,s._RF.pop()}}}));

System.register("chunks:///_virtual/gamblingPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./resourceUtil.ts","./rule.ts"],(function(t){"use strict";var e,i,o,n,r,s,a,l,h,c,u,p,d,g,_,f,w,m,y,b,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Vec3,l=t.geometry,h=t.Node,c=t.Camera,u=t.Label,p=t.Sprite,d=t.ProgressBar,g=t.MeshCollider,_=t.RigidBody,f=t.PhysicsSystem,w=t.BoxCollider,m=t.Component},function(t){y=t.AudioManager},function(t){b=t.ResourceUtil},function(t){v=t.Rule}],execute:function(){var P,T,C,S,E,O,A,B,z,N,L,D,M,H,U,R,k,x,V,F,G;r._RF.push({},"cb85aESUbVCqbLWatzattWq","gamblingPanel",void 0);var I=s.ccclass,W=s.property,q=new a,j=new a,J=new l.AABB;t("GamblingPanel",(P=I("GamblingPanel"),T=W(h),C=W(c),S=W(h),E=W(h),O=W(h),A=W(u),B=W(p),z=W(d),P((D=e((L=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"touchPanel",D,n(e)),o(e,"mainCamera",M,n(e)),o(e,"throwNode",H,n(e)),o(e,"dicesNode",U,n(e)),o(e,"bowlNode",R,n(e)),o(e,"resultLabel",k,n(e)),o(e,"resultSprite",x,n(e)),o(e,"progress",V,n(e)),o(e,"angular",F,n(e)),o(e,"linear",G,n(e)),e._ray=new l.Ray,e._dices=[],e._targetPositions=[],e._isThrowing=!1,e._isOver=!0,e._ratio=0,e._rule=new v,e._throwTime=0,e._isAdd=!0,e._bowlAABB=new l.AABB,e._outSizeSphere=new l.Sphere(0,1.3,0,1.5),e}i(e,t);var r=e.prototype;return r.start=function(){y.instance.init(),this._dices=this.dicesNode.children.concat(),this.resultLabel.string="请抓起骰子进行游戏",this.bowlNode.getComponent(g).on("onCollisionEnter",this._onCollisionBowl,this)},r._onCollisionBowl=function(t){if(!this._isOver){var e=t.otherCollider.node.getComponent(_);null==e||e.getLinearVelocity(q),q.length()>.1&&y.instance.playSound("rand"+(Math.floor(4*Math.random())+1))}},r.onEnable=function(){this.touchPanel.on(h.EventType.TOUCH_START,this._onTouchStart,this),this.touchPanel.on(h.EventType.TOUCH_MOVE,this._onTouchMove,this),this.touchPanel.on(h.EventType.TOUCH_END,this._onTouchEnd,this),this.touchPanel.on(h.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},r.onDisable=function(){this.touchPanel.off(h.EventType.TOUCH_START,this._onTouchStart,this),this.touchPanel.off(h.EventType.TOUCH_MOVE,this._onTouchMove,this),this.touchPanel.off(h.EventType.TOUCH_END,this._onTouchEnd,this),this.touchPanel.off(h.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},r.mergeDices=function(){this._targetPositions.length=0,this._targetPositions.push(new a);for(var t=1;t<this._dices.length;t++)a.subtract(q,this._dices[t].position,this._dices[0].position),q.y=0,a.normalize(q,q),a.multiplyScalar(q,q,.01),this._targetPositions.push(q.clone())},r._onTouchStart=function(t){if(!this._isOver)return!1;y.instance.playSound("pick"),this.resultLabel.enabled=!1,this.progress.node.parent.active=!0,this.resultSprite.spriteFrame=null,this.resultSprite.node.active=!1,this._throwTime=Date.now(),this._isThrowing=!0,this._dices.forEach((function(t){t.getComponent(_).useGravity=!1}));var e=this._getHitPoint(t);this.throwNode.setPosition(e),this._dices.sort((function(t,i){return a.distance(t.worldPosition,e)-a.distance(i.worldPosition,e)})),this.mergeDices()},r._getHitPoint=function(t){if(this.mainCamera.screenPointToRay(t.getLocation().x,t.getLocation().y,this._ray),f.instance.raycast(this._ray))for(var e=f.instance.raycastResults,i=0;i<e.length;i++)if("throwPanel"==e[i].collider.node.name)return e[i].hitPoint;return new a},r._onTouchMove=function(t){if(this._isThrowing){var e=this._getHitPoint(t);this.throwNode.setPosition(e)}},r._onTouchEnd=function(t){var e=this;if(this._isThrowing){var i=Date.now()-this._throwTime;this.scheduleOnce((function(){e.throwDices()}),Math.max(0,.3-i/1e3))}},r.throwDices=function(){var t=this;this._isThrowing=!1,this._isOver=!1,this.progress.node.parent.active=!1,this._ratio=this.progress.progress;var e=(this._ratio+1)*this.angular;this._ratio,this.linear;this._dices.forEach((function(i){i.getComponent(_).useGravity=!0,i.getComponent(_).setAngularVelocity(new a(Math.random()*e-e/2,0,Math.random()*e-e/2)),a.subtract(q,i.worldPosition,t._targetPositions[0]),a.normalize(q,q),a.multiplyScalar(q,q,10+10*t._ratio),q.y=-1-3*t._ratio,i.getComponent(_).setLinearVelocity(q.clone())}))},r.update=function(t){var e=this;this._isThrowing&&(this._isAdd?(this.progress.progress+=t,this.progress.progress>=1&&(this._isAdd=!1)):(this.progress.progress-=t,this.progress.progress<=0&&(this._isAdd=!0)),this._targetPositions.length>0&&this._dices.forEach((function(i,o){i.getComponent(_).clearState(),i.getPosition(q),a.add(j,e._targetPositions[o],e.throwNode.worldPosition),a.lerp(q,q,j,5*t),i.setWorldPosition(q)}))),this._isOver||this.checkOver()},r.checkOver=function(){for(var t=0;t<this._dices.length;t++){var e=this._dices[t];if(!this._checkInBowl(e))return this._isOver=!0,b.setSpriteFrame("texture/th",this.resultSprite),this.resultSprite.node.active=!0,void y.instance.playSound("lost")}var i=!0;if(this._dices.forEach((function(t){t.getComponent(_).isSleeping||(i=!1)})),i){this._isOver=!0;for(var o=[],n=0;n<this._dices.length;n++){var r=this._dices[n];o.push(this.getDicePoint(r))}console.log("pointList",o);var s=this._rule.checkList(o);b.setSpriteFrame("texture/"+s.image,this.resultSprite),this.resultSprite.node.active=!0,s.hasOwnProperty("see")?y.instance.playSound(s.see):y.instance.playSound("win")}},r.getDicePoint=function(t){var e=0,i=0;return t.children.forEach((function(t){-1!=t.name.indexOf("num")&&t.worldPosition.y>i&&(e=Number(t.name.substring(3)),i=t.worldPosition.y)})),e},r._checkInBowl=function(t){var e=t.getComponent(w);return l.AABB.copy(J,e.worldBounds),l.intersect.sphereAABB(this._outSizeSphere,J)},r.buy=function(){window.location.href="https://store.cocos.com/app/detail/4074"},e}(m)).prototype,"touchPanel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(L.prototype,"mainCamera",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(L.prototype,"throwNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(L.prototype,"dicesNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(L.prototype,"bowlNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(L.prototype,"resultLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(L.prototype,"resultSprite",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(L.prototype,"progress",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(L.prototype,"angular",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),G=e(L.prototype,"linear",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),N=L))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./migrate-canvas.ts","./audioManager.ts","./gamblingPanel.ts","./resourceUtil.ts","./rule.ts"],(function(){"use strict";return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var n,e,t,i,r,o;return{setters:[function(a){n=a.cclegacy,e=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){n._RF.push({},"b0a4bmB8UBONISbVrb0RlHg","migrate-canvas",void 0);var a=1048575;function c(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,c(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,l,s=null==(n=e.getScene())?void 0:n.children,m=null==(t=e.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(n){return!!n.cameraComponent}));var u=null==(l=e.getScene())?void 0:l.getComponentsInChildren(r),v=0;u.forEach((function(n){return v|=n.visibility&a}));for(var p=[],f=0,C=s.length;f<C;f++){var h=s[f];if(o.isPersistRootNode(h)){var d=h.getComponentsInChildren(i);0!==d.length&&p.push.apply(p,d.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(m.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&a}))){var e=~v,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,c(n.node,t),v|=e}}))}}));var l=cc.Node.prototype.setParent;function s(n){var e=null,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=s(n.parent)),e)}cc.Node.prototype.setParent=function(n,e){if(l.call(this,n,e),n){var t=s(this);t&&(this.layer=t,c(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,n,a,u,s,i,o,c,p,f,l;return{setters:[function(r){e=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){n=r.cclegacy,a=r.resources,u=r.error,s=r.Prefab,i=r.assetManager,o=r.Texture2D,c=r.SpriteFrame,p=r.instantiate,f=r.isValid,l=r.SpriteAtlas}],execute:function(){n._RF.push({},"c0fc2Jq7klDIJifjswzgGoy","resourceUtil",void 0);r("ResourceUtil",function(){function r(){}return r.loadRes=function(r,e){return new Promise((function(t,n){a.load(r,e,(function(r,e){if(r)return u(r.message||r),void(n&&n(r));t&&t(e)}))}))},r.loadEffectRes=function(){var r=e(t().mark((function r(e){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.loadRes("prefab/effect/"+e,s));case 1:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),r.loadModelRes=function(){var r=e(t().mark((function r(e){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.loadRes("prefab/model/"+e,s));case 1:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),r.loadModelResArr=function(r,e,t,n){var u=e.map((function(e){return r+"/"+e}));a.load(u,s,t,n)},r.loadSpriteFrameRes=function(){var r=e(t().mark((function r(e){var n,a,u;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadRes(e,c);case 2:return n=r.sent,(a=new o).image=n,(u=new c).texture=a,r.abrupt("return",u);case 8:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),r.getMap=function(){var r=e(t().mark((function r(e){var n,a,u,s,i;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n="map",n+=e>=100?e:e>=10?"0"+e:"00"+e,r.next=4,this.loadRes("map/config/"+n,null);case 4:if(a=r.sent,u="",!a._file){r.next=12;break}return window.LZString&&(u=window.LZString.decompressFromEncodedURIComponent(a._file)),s=JSON.parse(u),r.abrupt("return",s);case 12:if(!a.text){r.next=18;break}return window.LZString&&(u=window.LZString.decompressFromEncodedURIComponent(a.text)),i=JSON.parse(u),r.abrupt("return",i);case 18:if(!a.json){r.next=22;break}return r.abrupt("return",a.json);case 22:return r.abrupt("return","failed");case 23:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),r.getMapObj=function(r,e,t,n){for(var u=[],i=0;i<e.length;i++)u.push("map/"+r+"/"+e[i]);a.load(u,s,t,n)},r.getUIPrefabRes=function(){var r=e(t().mark((function r(e){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.loadRes("prefab/ui/"+e,s));case 1:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),r.createUI=function(){var r=e(t().mark((function r(e){var n,a;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getUIPrefabRes(e);case 2:return n=r.sent,(a=p(n)).setPosition(0,0,0),r.abrupt("return",a);case 6:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),r.getJsonData=function(){var r=e(t().mark((function r(e){var n;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadRes("datas/"+e,null);case 2:if(!(n=r.sent).json){r.next=7;break}return r.abrupt("return",n.json);case 7:return r.abrupt("return","failed!!!");case 8:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),r.getTextData=function(){var r=e(t().mark((function r(e){var n,a;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadRes("datas/"+e,null);case 2:return n=r.sent,a=n.text,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),r.setSpriteFrame=function(){var r=e(t().mark((function r(e,n){var a;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadRes(e+"/spriteFrame",c);case 2:a=r.sent,n&&f(n)&&(n.spriteFrame=a);case 4:case"end":return r.stop()}}),r,this)})));return function(e,t){return r.apply(this,arguments)}}(),r.loadDirRes=function(r,e){return new Promise((function(t,n){a.loadDir(r,e,(function(r,e){r?(console.error(r),null==n||n(r)):null==t||t(e)}))}))},r.setSpriteFrameFromPlist=function(){var r=e(t().mark((function r(e,n,a){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.loadDirRes("texture/"+e,l).then((function(r){n.spriteFrame=r[0].spriteFrames[a]}));case 1:case"end":return r.stop()}}),r,this)})));return function(e,t,n){return r.apply(this,arguments)}}(),r.loadRemoteImg=function(r,e,t){r&&i.loadRemote(r,(function(r,n){var a=new o;a.image=n;var u=new c;u.texture=a,e&&(e.spriteFrame=u),null==t||t(u)}))},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/rule.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"22fdc75hc9CyoL98/WtAhg3","rule",void 0);var t={ZYCJH:{label:"状元插金花！！！",image:"zycjh",see:"zycjh"},MTH:{label:"状元！满堂红",image:"lbh"},BDJ:{label:"状元！遍地锦",image:"bdj"},LBH:{label:"状元！六杯黑",image:"lbhei"},WH:{label:"状元！五红",image:"wh"},WZDK:{label:"状元！五子登科",image:"wzdk"},SDH:{label:"状元！四点红",image:"zy"},DuiTang:{label:"对堂",image:"dt"},SanHong:{label:"三红",image:"sh"},SiJin:{label:"四进",image:"sj"},ErJu:{label:"二举",image:"ej"},YiXiu:{label:"一秀",image:"yx"}};e("Rule",function(){function e(){}var n=e.prototype;return n.checkList=function(e){for(var n in t){if(this["_check"+n].call(this,e))return t[n]}return{label:"请再接再厉哦",image:"xmlm",see:"lost"}},n._checkYiXiu=function(e){return 1==this.countNumber(e,4)},n._checkErJu=function(e){return 2==this.countNumber(e,4)},n._checkSiJin=function(e){for(var n=[1,2,3,5,6],t=0;t<n.length;t++)if(4==this.countNumber(e,n[t]))return!0;return!1},n._checkSanHong=function(e){return 3==this.countNumber(e,4)},n._checkDuiTang=function(e){for(var n=e.sort(),t=0;t<n.length;t++)if(n[t]!=t+1)return!1;return!0},n._checkSDH=function(e){return 4==this.countNumber(e,4)},n._checkWZDK=function(e){for(var n=[1,2,3,5,6],t=0;t<n.length;t++)if(5==this.countNumber(e,n[t]))return!0;return!1},n._checkWH=function(e){return 5==this.countNumber(e,4)},n._checkLBH=function(e){for(var n=[2,3,5,6],t=0;t<n.length;t++)if(6==this.countNumber(e,n[t]))return!0;return!1},n._checkBDJ=function(e){return 6==this.countNumber(e,1)},n._checkMTH=function(e){return 6==this.countNumber(e,4)},n._checkZYCJH=function(e){return 4==this.countNumber(e,4)&&2==this.countNumber(e,1)},n.countNumber=function(e,n){var t=0;return e.forEach((function(e){e==n&&t++})),t},n.sumOutNumberCount=function(e,n){var t=0;return e.forEach((function(e){e==n||(t+=n)})),t},e}());n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});